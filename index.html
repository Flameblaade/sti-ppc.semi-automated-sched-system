<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automated Scheduling System</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.0/main.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar-scheduler@5.10.0/main.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/main.css">
    <!-- Add SheetJS (xlsx) library for Excel export -->
    <script src="https://cdn.sheetjs.com/xlsx-0.19.3/package/dist/xlsx.full.min.js"></script>
</head>
<body>
    <div class="app-container">
        <header class="header">
            <div class="logo">
                <img src="assets/sti.png" alt="University Logo">
                <h1>Automated Scheduling System</h1>
            </div>            <div class="user-menu">
                <span class="user-name">Admin User</span>
                <span class="role-badge">User</span>
                <a href="#" class="logout-btn">Logout</a>
            </div>
        </header>

        <div class="main-content">
            <!-- Schedule Form Panel -->
            <div class="schedule-form panel">
                <h2 class="panel-title">Create Schedule</h2>
                
                <form id="scheduleForm">                    <div class="form-group">
                        <label for="departmentSelect">Department</label>
                        <select id="departmentSelect" class="form-control">
                            <option value="" selected disabled>Select Department</option>
                            <option value="BSIT">BSIT</option>
                            <option value="BSAIS">BSAIS</option>
                            <option value="BSHM">BSHM</option>
                            <option value="BSTM">BSTM</option>
                        </select>
                        <div class="form-error">Please select a department</div>
                    </div>
                          <div class="form-group">
                        <label for="facultySelect">Faculty Member</label>
                        <select id="facultySelect" class="form-control" disabled>
                            <option value="" selected disabled>Select Faculty Member</option>
                            <!-- Will be populated based on department selection -->
                        </select>
                        <div class="form-error">Please select a faculty member</div>
                    </div>
                        
                    <div class="form-group">
                        <label for="subjectSelect">Subject</label>
                        <select id="subjectSelect" class="form-control" disabled>
                            <option value="" selected disabled>Select Subject</option>
                            <!-- Will be populated based on faculty selection -->
                        </select>
                        <div class="form-error">Please select a subject</div>
                    </div>
                          <div class="form-group">
                        <label for="unitLoadInput">Unit Load (Hours)</label>
                        <input type="text" id="unitLoadInput" class="form-control" value="3" placeholder="Enter unit load (e.g., 1.5, 3.0)">
                        <div class="form-error">Please enter a valid number (e.g., 1.5, 3, 4.5)</div>
                    </div>
                        
                    <div class="form-group">
                        <label>Class Type</label>
                        <div class="radio-group">
                            <label class="radio-container">Lecture
                                <input type="radio" name="classType" value="lecture" checked>
                                <span class="radio-custom"></span>
                            </label>
                            <label class="radio-container">Laboratory
                                <input type="radio" name="classType" value="laboratory">
                                <span class="radio-custom"></span>
                            </label>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" id="submitScheduleBtn" class="primary-btn">
                            Submit <i class="fas fa-check"></i>
                        </button>
                        <button type="button" id="resetFormBtn" class="secondary-btn">
                            Reset <i class="fas fa-redo"></i>
                        </button>
                    </div>
                </form>
                
                <!-- Created Schedules -->
                <div class="classes-container">
                    <div class="panel-header">
                        <h3 class="panel-title">Created Classes</h3>
                    </div>
                    <div id="createdClasses" class="classes-list">
                        <!-- Classes will be added here dynamically -->
                        <div class="empty-state">
                            <i class="fas fa-calendar-plus"></i>
                            <p>No classes created yet. Start by filling the form above.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Schedule View Panel -->
            <div class="schedule-view panel">
                <div class="panel-header">
                    <h2 class="panel-title">Schedule Timetable</h2>
                    <div class="action-buttons">
                        <button id="generateScheduleBtn" class="primary-btn">
                            <i class="fas fa-magic"></i> Generate Schedule
                        </button>
                        <button id="clearAllClassesBtn" class="secondary-btn">
                            <i class="fas fa-trash-alt"></i> Clear All
                        </button>
                        <button id="printScheduleBtn" class="primary-btn">
                            <i class="fas fa-print"></i> Print
                        </button>
                    </div>
                </div>
                
                <div class="calendar-container">
                    <div class="calendar-filter">
                        <div class="filter-heading">Filter Courses:</div>
                        <div class="course-filter-options">
                            <label class="course-checkbox">
                                <input type="checkbox" value="BSIT" class="course-filter-checkbox" checked> BSIT
                            </label>
                            <label class="course-checkbox">
                                <input type="checkbox" value="BSAIS" class="course-filter-checkbox" checked> BSAIS
                            </label>
                            <label class="course-checkbox">
                                <input type="checkbox" value="BSHM" class="course-filter-checkbox" checked> BSHM
                            </label>
                            <label class="course-checkbox">
                                <input type="checkbox" value="BSTM" class="course-filter-checkbox" checked> BSTM
                            </label>
                            <button id="showAllBtn" class="filter-btn secondary">Show All</button>
                        </div>
                    </div>
                    <div id="calendar"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Event Details Modal -->
    <div id="eventModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Event Details</h3>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <p><strong>Subject:</strong> <span id="modalSubject"></span></p>
                <p><strong>Course:</strong> <span id="modalCourse"></span></p>
                <p><strong>Faculty:</strong> <span id="modalFaculty"></span></p>
                <p><strong>Room:</strong> <span id="modalRoom"></span></p>
                <p><strong>Duration:</strong> <span id="modalDuration"></span></p>
                <p><strong>Type:</strong> <span id="modalType"></span></p>
                <div class="modal-field" id="modalRoomSelectContainer">
                    <label>Room:</label>
                    <select id="modalRoomSelect" class="modal-input"></select>
                </div>
                <button id="changeRoomBtn" class="modal-btn">Change Room</button>
            </div>
            <div class="modal-footer">
                <button class="secondary-btn" id="closeModal">Close</button>
                <button class="primary-btn" id="deleteEventBtn">Delete</button>
            </div>
        </div>
    </div>
    
    <!-- Room Assignment Modal -->
    <div id="roomModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Room Assignment</h3>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body" id="roomModalContent">
                <p>The system has assigned a room for this class:</p>
                <div class="success-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <p class="text-center"><strong>Room:</strong> <span id="assignedRoom"></span></p>
                
                <!-- Day selection dropdown -->
                <div class="form-group">
                    <label for="daySelect">Select Day</label>
                    <select id="daySelect" class="form-control">
                        <option value="Monday">Monday</option>
                        <option value="Tuesday">Tuesday</option>
                        <option value="Wednesday">Wednesday</option>
                        <option value="Thursday">Thursday</option>
                        <option value="Friday">Friday</option>
                        <option value="Saturday">Saturday</option>
                    </select>
                </div>
                
                <!-- Time selection dropdown -->
                <div class="form-group">
                    <label for="timeSelect">Select Starting Time</label>
                    <select id="timeSelect" class="form-control">
                        <option value="07:00:00">7:00 AM</option>
                        <option value="07:30:00">7:30 AM</option>
                        <option value="08:00:00">8:00 AM</option>
                        <option value="08:30:00">8:30 AM</option>
                        <option value="09:00:00">9:00 AM</option>
                        <option value="09:30:00">9:30 AM</option>
                        <option value="10:00:00">10:00 AM</option>
                        <option value="10:30:00">10:30 AM</option>
                        <option value="11:00:00">11:00 AM</option>
                        <option value="11:30:00">11:30 AM</option>
                        <option value="12:00:00">12:00 PM</option>
                        <option value="12:30:00">12:30 PM</option>
                        <option value="13:00:00">1:00 PM</option>
                        <option value="13:30:00">1:30 PM</option>
                        <option value="14:00:00">2:00 PM</option>
                        <option value="14:30:00">2:30 PM</option>
                        <option value="15:00:00">3:00 PM</option>
                        <option value="15:30:00">3:30 PM</option>
                        <option value="16:00:00">4:00 PM</option>
                        <option value="16:30:00">4:30 PM</option>
                        <option value="17:00:00">5:00 PM</option>
                        <option value="17:30:00">5:30 PM</option>
                        <option value="18:00:00">6:00 PM</option>
                        <option value="18:30:00">6:30 PM</option>
                        <option value="19:00:00">7:00 PM</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="primary-btn" id="acceptRoomBtn">Accept</button>
                <button class="secondary-btn close-modal">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Loading Modal -->
    <div id="loadingModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Generating Schedule</h3>
            </div>
            <div class="modal-body">
                <div class="spinner"></div>
                <p id="scheduling-status">Please wait while we generate your optimal schedule...</p>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="scheduling-progress"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Conflicts Modal -->
    <div id="conflictsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Scheduling Conflicts</h3>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <p>The following classes couldn't be scheduled due to conflicts:</p>
                <ul id="conflictsList"></ul>
                <p>Try reducing the number of classes or adjusting some manually.</p>
            </div>
            <div class="modal-footer">
                <button class="secondary-btn close-modal">Close</button>
            </div>
        </div>
    </div>

    <!-- Custom Confirm Modal -->
    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirm Action</h3>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <p id="confirmMessage">Are you sure you want to clear all classes? This will remove all classes from both the list and the calendar.</p>
            </div>
            <div class="modal-footer">
                <button class="danger-btn" id="confirmYesBtn">Yes, Clear All</button>
                <button class="secondary-btn" id="confirmNoBtn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification success" id="notification" style="display: none;">
        <i class="fas fa-check-circle"></i>
        <span id="notificationMessage"></span>
    </div>

    <!-- Scripts -->
    <!-- FullCalendar Premium Bundle (includes all plugins including resources) -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar-scheduler@5.10.0/main.min.js"></script>
    
    <script src="javascript/main.js"></script>
</body>
</html>